  
      
        <app-redirect-hp></app-redirect-hp>
     

    <main class="fade-in py-5 bg-soft-gray">
   
      <div class="container container-narrow">
        
        <div class="form-header text-center mb-5">
          <h1 class="display-6 fw-bold text-navy">Formulario de Registro y Seguimiento (QRSS)</h1>
          <p class="text-muted">Por favor, complete la información solicitada a continuación.</p>
        </div>

        <form (ngSubmit)="onSubmit()" #qrssForm="ngForm" class="modern-form">
          
          <!-- SECTION 1: Unidad Ejecutora -->
          <div class="form-card mb-4 shadow-sm animate-up">
            <h4 class="card-title"><i class="bi bi-building me-2"></i>Unidad Ejecutora</h4>
            <hr class="mb-4 opacity-10">
            
            <div class="mb-4">
              <label class="form-label-modern" for="Unidad-Ejecutora">Indicar la Unidad Ejecutora:</label>
              <select class="form-select-modern" name="Unidad-Ejecutora" required [(ngModel)]="formData.Unidad_Ejecutora">
                <option value="" disabled selected>Seleccione una unidad...</option>
                <option value="MISPAS">MISPAS</option>
                <option value="MIVHED">MIVHED</option>
              </select>
              
              @if(eMUnidad_Ejecutora()) {
                <div class="error-box mt-2">
                  <span class="error-icon">!</span>
                  <span>{{ eMUnidad_Ejecutora() }}</span>
                </div>
              }
            </div>

            <div class="project-info p-3 rounded-3 bg-light-blue mb-0">
              <h6 class="text-uppercase text-accent fw-bold small mb-1">Nombre del proyecto</h6>
              <p class="mb-1 fw-bold text-navy">PROYECTO DE APOYO AL FORTALECIMIENTO DEL SISTEMA NACIONAL DE SALUD DE LA REPUBLICA DOMINICANA</p>
              <p class="small text-muted mb-0">(P180349)</p>
            </div>
          </div>

          <!-- SECTION 2: Recepción -->
          <div class="form-card mb-4 shadow-sm animate-up delay-1">
            <h4 class="card-title"><i class="bi bi-clock-history me-2"></i>Detalles de Recepción</h4>
            <hr class="mb-4 opacity-10">

            <div class="mb-4">
              <label class="form-label-modern mb-3">¿La recepción fue creada hoy?</label>
              <div class="d-flex gap-4">
                <label class="radio-container">
                  <input type="radio" name="isToday" [(ngModel)]="formData.isToday" value="yes" (change)="clickEsHoy()">
                  <span class="radio-checkmark"></span> Sí
                </label>
                <label class="radio-container">
                  <input type="radio" name="isToday" [(ngModel)]="formData.isToday" value="no" (change)="clickNoEsHoy()">
                  <span class="radio-checkmark"></span> No
                </label>
              </div>

              @if(isDateToday === false) {
                <div class="mt-3 slide-in">
                  <label class="form-label-modern small">Favor especificar la fecha y hora:</label>
                  <input type="datetime-local" class="form-control-modern" name="fecha-hora" [(ngModel)]="formData.fecha_hora_recepcion">
                </div>
              }
            </div>

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label-modern">Lugar de Recepción:</label>
                <input name="lugar" type="text" class="form-control-modern" placeholder="Ej: Oficina Central" [(ngModel)]="formData.lugar">
              </div>
              <div class="col-md-6">
                <label class="form-label-modern">Recibido por (Nombre y Puesto):</label>
                <input name="recibido-por" type="text" class="form-control-modern" placeholder="Nombre completo" [(ngModel)]="formData.recibido_por">
              </div>
            </div>

            <div class="mt-4">
              <label class="form-label-modern mb-3">Medios de Recepción:</label>
              <div class="options-grid">
                @for(medio of ['Verbal', 'Telefonico', 'Oficina de Atencion Permanente', 'Otros medios']; track medio) {
                  <label class="radio-container">
                    <input type="radio" name="recepcion" [value]="medio" [(ngModel)]="formData.medios_recepcion" (change)="selectedOption.set(null)">
                    <span class="radio-checkmark"></span> {{medio}}
                  </label>
                }
                <label class="radio-container">
                  <input type="radio" name="recepcion" value="Escrito" [(ngModel)]="formData.medios_recepcion" (change)="selectedOption.set('optionE')">
                  <span class="radio-checkmark"></span> Escrito
                </label>
              </div>

              @if(selectedOption() === 'optionE') {
                <div class="mt-4 p-4 border-start border-4 border-primary bg-light rounded-3 slide-in">
                  <h6 class="fw-bold mb-3 text-navy">Especifique la recepción escrita:</h6>
                  <div class="d-flex flex-wrap gap-3">
                    @for(escrito of ['Carta', 'Correo', 'Virtual', 'Sugerencia']; track escrito) {
                      <label class="radio-container">
                        <input type="radio" name="carta_Recepcion" [value]="escrito" [(ngModel)]="formData.carta_Recepcion">
                        <span class="radio-checkmark"></span> {{escrito}}
                      </label>
                    }
                  </div>
                </div>
              }
            </div>
          </div>

          <!-- SECTION 3: Datos Personales -->
          <div class="form-card mb-4 shadow-sm animate-up">
            <h4 class="card-title"><i class="bi bi-person-badge me-2"></i>I. Datos Personales</h4>
            <p class="text-muted small mb-4">(Se permite QRSS anónimas)</p>
            <hr class="mb-4 opacity-10">

            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label class="form-label-modern">Nombre:</label>
                <input name="nombre" type="text" class="form-control-modern" [(ngModel)]="formData.nombre">
              </div>
              <div class="col-md-6">
                <label class="form-label-modern">Apellido:</label>
                <input name="apellido" type="text" class="form-control-modern" [(ngModel)]="formData.apellido">
              </div>
            </div>
            
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label-modern">Ciudad:</label>
                <input name="ciudad" type="text" class="form-control-modern" [(ngModel)]="formData.ciudad">
              </div>
              <div class="col-md-8">
                <label class="form-label-modern">Correo Electrónico:</label>
                <input name="correoT" type="email" class="form-control-modern" [(ngModel)]="formData.correoT">
              </div>
            </div>
          </div>

          <!-- SECTION 4: Información del Caso -->
          <div class="form-card mb-4 shadow-sm animate-up">
            <h4 class="card-title"><i class="bi bi-info-circle me-2"></i>II. Información del Caso</h4>
            <hr class="mb-4 opacity-10">

            <div class="mb-4">
              <label class="form-label-modern mb-3">Tipo de caso:</label>
              <div class="options-grid mb-3">
                @for(tipo of ['Queja', 'Reclamo', 'Solicitud', 'Sugerencia']; track tipo) {
                  <label class="radio-container">
                    <input type="radio" name="registrar" [value]="tipo" [(ngModel)]="formData.tipo_Caso">
                    <span class="radio-checkmark"></span> {{tipo}}
                  </label>
                }
              </div>
              
              <label class="form-label-modern">Detalle el caso:</label>
              <textarea name="detalle" rows="4" class="form-control-modern" placeholder="Describa los hechos detalladamente..." [(ngModel)]="formData.detalle"></textarea>
            </div>

            <div class="mb-4">
              <label class="form-label-modern">Documentación adjunta (Informe, fotos, otros):</label>
              <div class="file-upload-wrapper mt-2">
                <input type="file" id="fileUpload" class="file-input">
                <label for="fileUpload" class="file-label">
                  <i class="bi bi-cloud-arrow-up fs-4 mb-1"></i>
                  <span>Haga clic para subir archivos</span>
                </label>
              </div>
            </div>

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label-modern">Fecha del caso:</label>
                <input type="date" name="fecha-caso" class="form-control-modern" [(ngModel)]="formData.fecha_caso">
              </div>
              <div class="col-md-6">
                <label class="form-label-modern">Lugar del caso:</label>
                <input type="text" name="lugar-caso" class="form-control-modern" [(ngModel)]="formData.lugar_caso">
              </div>
            </div>
          </div>

          <!-- SECTION 5: Responsable -->
          <div class="form-card mb-5 shadow-sm animate-up">
            <h4 class="card-title"><i class="bi bi-person-check me-2"></i>III. Observaciones y Responsable</h4>
            <hr class="mb-4 opacity-10">

            <div class="mb-4">
              <label class="form-label-modern">Observaciones Adicionales:</label>
              <textarea name="Obv-Ads" rows="3" class="form-control-modern" [(ngModel)]="formData.Obv_Ads"></textarea>
            </div>

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label-modern">Responsable de atención:</label>
                <input name="NombreResponsable" type="text" class="form-control-modern" [(ngModel)]="formData.NombreResponsable">
              </div>
              <div class="col-md-6">
                <label class="form-label-modern">Cargo:</label>
                <input name="cargo" type="text" class="form-control-modern" [(ngModel)]="formData.cargo">
              </div>
            </div>
          </div>

          <!-- SUBMIT ACTION -->
          <div class="d-grid mb-5">
            <button type="submit" class="btn-submit-modern py-3 shadow">
              <i class="bi bi-check-circle-fill me-2"></i>
              Guardar y Finalizar Reporte
            </button>
          </div>

        </form>
      </div>
    </main>
